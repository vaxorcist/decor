<%# decor/app/views/components/index.html.erb - version 1.2 %>
<%# Updated: Added Serial Number as second column %>

<div class="px-4">
  <h1 class="text-2xl font-semibold mb-4 sticky top-0 bg-white z-10 py-2">Components</h1>

  <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
    <div class="sticky top-16 self-start">
      <%= render "filters" %>
    </div>

    <div class="col-span-3 self-start">
      <% if @page.records.any? %>
        <div class="bg-white border border-stone-200 rounded overflow-auto" style="max-height: calc(100vh - 8rem);">
          <table class="min-w-full divide-y divide-stone-200">
            <thead class="bg-stone-50 sticky top-0 z-10">
              <tr>
                <th class="px-4 py-2 text-left text-xs font-medium text-stone-500 uppercase tracking-wider">Computer</th>
                <th class="px-4 py-2 text-left text-xs font-medium text-stone-500 uppercase tracking-wider">Serial Number</th>
                <th class="px-4 py-2 text-left text-xs font-medium text-stone-500 uppercase tracking-wider">Type</th>
                <th class="px-4 py-2 text-left text-xs font-medium text-stone-500 uppercase tracking-wider">Description</th>
                <th class="px-4 py-2 text-left text-xs font-medium text-stone-500 uppercase tracking-wider">Owner</th>
                <th class="px-4 py-2"></th>
              </tr>
            </thead>
            <tbody id="components" class="bg-white divide-y divide-stone-200 text-sm">
              <% @page.records.each do |component| %>
                <%= render "component", component: component %>
              <% end %>
            </tbody>
          </table>
        </div>
      <% else %>
        <%= empty_state("No components found matching your search") %>
      <% end %>
    </div>

    <%= render "shared/load_more", id: :load_more_components, page: @page, path: components_path %>
  </div>

</div>
