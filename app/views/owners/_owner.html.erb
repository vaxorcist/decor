<%# decor/app/views/owners/_owner.html.erb - version 3.2 %>
<%# Removed redundant "View" link from actions column — user_name already links to owner page %>
<%# "Edit" link retained, shown only for the logged-in owner %>

<tr id="<%= dom_id owner %>" class="hover:bg-stone-50">
  <!-- Computers Count (clickable - links to filtered computers) -->
  <td class="px-4 py-3 whitespace-nowrap font-medium text-stone-900">
    <%= link_to owner.computers.count, computers_path(owner_id: owner.id), class: "text-indigo-600 hover:text-indigo-900" %>
  </td>

  <!-- User Name (clickable) -->
  <td class="px-4 py-3 whitespace-nowrap font-medium text-stone-900">
    <%= link_to owner.user_name, owner, class: "text-indigo-600 hover:text-indigo-900" %>
  </td>
  
  <!-- Real Name (respects visibility, max-width 25 characters) -->
  <td class="px-4 py-3 text-stone-600" style="max-width: 25ch;">
    <div class="truncate">
      <% if owner.real_name_visibility_public? || (owner.real_name_visibility_members_only? && Current.owner.present?) %>
        <%= owner.real_name.presence || "—" %>
      <% else %>
        <span class="text-stone-400 italic">Private</span>
      <% end %>
    </div>
  </td>
  
  <!-- Email (respects visibility) -->
  <td class="px-4 py-3 whitespace-nowrap text-stone-600">
    <% if owner.email_visibility_public? || (owner.email_visibility_members_only? && Current.owner.present?) %>
      <%= owner.email %>
    <% else %>
      <span class="text-stone-400 italic">Private</span>
    <% end %>
  </td>
  
  <!-- Country (respects visibility) -->
  <td class="px-4 py-3 whitespace-nowrap text-stone-600">
    <% if owner.country.present? && (owner.country_visibility_public? || (owner.country_visibility_members_only? && Current.owner.present?)) %>
      <%= owner.country_emoji %> <%= owner.country_name %>
    <% elsif owner.country.present? %>
      <span class="text-stone-400 italic">Private</span>
    <% end %>
  </td>
  
  <!-- Website -->
  <td class="px-4 py-3 text-stone-600">
    <% if owner.website.present? %>
      <%= link_to owner.website, owner.website, target: "_blank", rel: "noopener noreferrer", class: "text-indigo-600 hover:text-indigo-900" %>
    <% end %>
  </td>
  
  <!-- Actions -->
  <td class="px-4 py-3 whitespace-nowrap text-right">
    <% if Current.owner == owner %>
      <%= link_to "Edit", edit_owner_path(owner), class: "text-indigo-600 hover:text-indigo-900" %>
    <% end %>
  </td>
</tr>
